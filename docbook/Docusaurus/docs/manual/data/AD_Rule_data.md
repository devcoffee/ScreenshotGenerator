<div id="d69851e1" class="table">

<div class="table-title">

Table 1. Regra

</div>

<div class="table-contents">

|                          |       |           |                  |                |                  |                                                       |               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |                   |
| :----------------------: | :---: | :-------: | :--------------: | :------------: | :--------------: | :---------------------------------------------------: | :-----------: | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: | :---------------: |
| Nível de Acesso de Dados | Regra | Descrição | Tipo de Entidade | Tipo de Evento | Comentário/Ajuda |                         Nome                          | Tipo de Regra |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      Roteiro (Script)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |  Chave de Busca   |
|            7             | 50003 |           |        D         |       R        |                  | Payment Clearing (unallocated cash/payment selection) |       Q       |                                                                                                                                                                                                                                                                                                                                                                     SELECT (CASE WHEN fa.AD\_Table\_ID = 335 /\*C\_Payment\*/ THEN (SELECT (CASE WHEN p.DocStatus IN ('VO','RE') AND p.Reversal\_ID \> 0 THEN 'Auto C\_Payment Reversed:' || least(p.C\_Payment\_ID, p.Reversal\_ID) WHEN p.DocStatus = 'VO' THEN 'Auto C\_Payment Voided:' || p.C\_Payment\_ID ELSE 'Auto C\_Payment:' || fa.Record\_ID END) FROM C\_Payment p WHERE p.C\_Payment\_ID=fa.Record\_ID) WHEN fa.AD\_Table\_ID = 735 /\*C\_AllocationHdr\*/ THEN (SELECT 'Auto C\_Payment:' || al.C\_Payment\_ID FROM C\_AllocationLine al WHERE al.C\_AllocationHdr\_ID = fa.Record\_ID AND al.C\_AllocationLine\_ID = fa.Line\_ID ) END) FROM Fact\_Acct fa WHERE fa.Fact\_Acct\_id=Fact\_Reconciliation.Fact\_Acct\_ID                                                                                                                                                                                                                                                                                                                                                                      |   GL\_Rec\_Pay    |
|            7             | 50001 |           |        D         |       R        |                  |       AR/AP Trade (Receivables/Vendor Liability       |       Q       |                                                                                                                                                                                                                                                                                                                                                                   SELECT (CASE WHEN fa.AD\_Table\_ID = 318 /\* C\_Invoice \*/ THEN (SELECT (CASE WHEN i.DocStatus IN ('VO','RE') AND i.Reversal\_ID \> 0 THEN 'Auto C\_Invoice Reversed:' || least(i.C\_Invoice\_ID, i.Reversal\_ID) WHEN i.DocStatus = 'VO' THEN 'Auto C\_Invoice Voided:' || i.C\_Invoice\_ID ELSE 'Auto C\_Invoice:' || fa.Record\_ID END) FROM C\_Invoice i WHERE i.C\_Invoice\_ID=fa.Record\_ID) WHEN fa.AD\_Table\_ID = 735 /\* C\_AllocationHdr \*/ THEN (SELECT 'Auto C\_Invoice:' || al.C\_Invoice\_ID FROM C\_AllocationLine al WHERE al.C\_AllocationHdr\_ID = fa.Record\_ID AND al.C\_AllocationLine\_ID = fa.Line\_ID ) END) FROM Fact\_Acct fa WHERE fa.Fact\_Acct\_id=Fact\_Reconciliation.Fact\_Acct\_ID                                                                                                                                                                                                                                                                                                                                                                    |   GL\_Rec\_ARAP   |
|            7             | 50002 |           |        D         |       R        |                  |                    Bank in Transit                    |       Q       |                                                                                                                                                                                                                                                                                                                                                                SELECT (CASE WHEN fa.AD\_Table\_ID = 335 /\*C\_Payment\*/ THEN (SELECT (CASE WHEN p.DocStatus IN ('VO','RE') AND p.Reversal\_ID \> 0 THEN 'Auto C\_Payment Reversed:' || least(p.C\_Payment\_ID, p.Reversal\_ID) WHEN p.DocStatus = 'VO' THEN 'Auto C\_Payment Voided:' || p.C\_Payment\_ID ELSE 'Auto C\_Payment:' || fa.Record\_ID END) FROM C\_Payment p WHERE p.C\_Payment\_ID=fa.Record\_ID) WHEN fa.AD\_Table\_ID = 392 /\*C\_BankStatement\*/ THEN (SELECT 'Auto C\_Payment:' || bsl.C\_Payment\_ID FROM C\_BankStatementLine bsl WHERE bsl.C\_BankStatement\_ID = fa.Record\_ID AND bsl.C\_BankStatementLine\_ID = fa.Line\_ID ) END) FROM Fact\_Acct fa WHERE fa.Fact\_Acct\_id=Fact\_Reconciliation.Fact\_Acct\_ID                                                                                                                                                                                                                                                                                                                                                                 |   GL\_Rec\_Bank   |
|                          | 50004 |           |        D         |       R        |                  |                 Not Invoiced Receipts                 |       Q       | SELECT (CASE WHEN fa.AD\_Table\_ID = 319 /\* M\_InOut \*/ THEN (SELECT (CASE WHEN io.DocStatus IN ('VO','RE') AND io.Reversal\_ID \> 0 THEN 'Auto M\_InOut Reversed:' || least(io.M\_InOut\_ID, io.Reversal\_ID) WHEN io.DocStatus = 'VO' THEN 'Auto M\_InOut Voided:' || io.M\_InOut\_ID ELSE 'Auto M\_InOut:' || fa.Record\_ID || ' Line:' || fa.Line\_ID END) FROM M\_InOut io WHERE io.M\_InOut\_ID = fa.Record\_ID) WHEN fa.AD\_Table\_ID = 318 /\* C\_Invoice \*/ THEN (SELECT MAX(CASE WHEN i.DocStatus IN ('VO', 'RE') AND i.Reversal\_ID \> 0 THEN 'Auto C\_Invoice Reversed:' || least(i.C\_Invoice\_ID, i.Reversal\_ID) WHEN i.DocStatus = 'VO' THEN 'Auto C\_Invoice Voided:' || i.C\_Invoice\_ID ELSE 'Auto M\_InOut:' || iol.M\_InOut\_ID || ' Line:' || m.M\_InOutLine\_ID END) FROM C\_InvoiceLine il INNER JOIN C\_Invoice i ON (i.C\_Invoice\_ID=il.C\_Invoice\_ID) LEFT OUTER JOIN M\_MatchInv m ON (il.C\_InvoiceLine\_ID=m.C\_InvoiceLine\_ID) LEFT OUTER JOIN M\_InOutLine iol ON (iol.M\_InOutLine\_ID=m.M\_InOutLine\_ID) WHERE il.C\_InvoiceLine\_ID = fa.Line\_ID ) WHEN fa.AD\_Table\_ID = 472 /\* M\_MatchInv \*/ THEN (SELECT 'Auto M\_InOut:' || iol.M\_InOut\_ID || ' Line:' || m.M\_InOutLine\_ID FROM M\_MatchInv m INNER JOIN M\_InOutLine iol ON (iol.M\_InOutLine\_ID=m.M\_InOutLine\_ID) WHERE m.M\_MatchInv\_ID = fa.Record\_ID ) END) FROM Fact\_Acct fa WHERE fa.Fact\_Acct\_id=Fact\_Reconciliation.Fact\_Acct\_ID | GL\_Rec\_Receipts |

</div>

</div>
