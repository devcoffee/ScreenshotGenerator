<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN" "../docbook-xml-4.5/docbookx.dtd">
<table>
<title>Regra</title>
<tgroup cols='10' align='center' colsep='1' rowsep='1'>

<tbody><row><entry>Nível de Acesso de Dados</entry><entry>Regra</entry><entry>Descrição</entry><entry>Tipo de Entidade</entry><entry>Tipo de Evento</entry><entry>Comentário/Ajuda</entry><entry>Nome</entry><entry>Tipo de Regra</entry><entry>Roteiro (Script)</entry><entry>Chave de Busca</entry></row>
<row><entry>7</entry><entry>50003</entry><entry> </entry><entry>D</entry><entry>R</entry><entry> </entry><entry>Payment Clearing (unallocated cash/payment selection)</entry><entry>Q</entry><entry> SELECT (CASE WHEN fa.AD_Table_ID = 335 /*C_Payment*/
THEN (SELECT (CASE WHEN p.DocStatus IN ('VO','RE') AND p.Reversal_ID &gt;
 0
                            THEN 'Auto C_Payment Reversed:' || least(p.C_Payment_ID, p.Reversal_ID)
                             WHEN p.DocStatus = 'VO'
                             THEN 'Auto C_Payment Voided:' || p.C_Payment_ID
                             ELSE 'Auto C_Payment:' || fa.Record_ID END)
              FROM C_Payment p
              WHERE p.C_Payment_ID=fa.Record_ID)   
 WHEN fa.AD_Table_ID = 735 /*C_AllocationHdr*/ 
 THEN (SELECT 'Auto C_Payment:' || al.C_Payment_ID FROM C_AllocationLine al 
 WHERE al.C_AllocationHdr_ID = fa.Record_ID 
 AND al.C_AllocationLine_ID = fa.Line_ID ) END) 
FROM Fact_Acct fa WHERE fa.Fact_Acct_id=Fact_Reconciliation.Fact_Acct_ID</entry><entry>GL_Rec_Pay</entry></row>
<row><entry>7</entry><entry>50001</entry><entry> </entry><entry>D</entry><entry>R</entry><entry> </entry><entry>AR/AP Trade (Receivables/Vendor Liability</entry><entry>Q</entry><entry> SELECT (CASE WHEN fa.AD_Table_ID =  318 /* C_Invoice */ 
THEN (SELECT (CASE WHEN i.DocStatus IN ('VO','RE') AND i.Reversal_ID &gt;
 0
                            THEN 'Auto C_Invoice Reversed:' || least(i.C_Invoice_ID, i.Reversal_ID)
                             WHEN i.DocStatus = 'VO'
                             THEN 'Auto C_Invoice Voided:' || i.C_Invoice_ID
                             ELSE 'Auto C_Invoice:' || fa.Record_ID END)
              FROM C_Invoice i
              WHERE i.C_Invoice_ID=fa.Record_ID)  
 WHEN fa.AD_Table_ID = 735 /* C_AllocationHdr */ 
 THEN (SELECT 'Auto C_Invoice:' || al.C_Invoice_ID FROM C_AllocationLine al 
 WHERE al.C_AllocationHdr_ID = fa.Record_ID 
 AND al.C_AllocationLine_ID = fa.Line_ID ) END)  FROM Fact_Acct fa WHERE fa.Fact_Acct_id=Fact_Reconciliation.Fact_Acct_ID</entry><entry>GL_Rec_ARAP</entry></row>
<row><entry>7</entry><entry>50002</entry><entry> </entry><entry>D</entry><entry>R</entry><entry> </entry><entry>Bank in Transit</entry><entry>Q</entry><entry> SELECT (CASE WHEN fa.AD_Table_ID = 335 /*C_Payment*/ 
 THEN (SELECT (CASE WHEN p.DocStatus IN ('VO','RE') AND p.Reversal_ID &gt;
 0
                            THEN 'Auto C_Payment Reversed:' || least(p.C_Payment_ID, p.Reversal_ID)
                             WHEN p.DocStatus = 'VO'
                             THEN 'Auto C_Payment Voided:' || p.C_Payment_ID
                             ELSE 'Auto C_Payment:' || fa.Record_ID END)
              FROM C_Payment p
              WHERE p.C_Payment_ID=fa.Record_ID)   
 WHEN fa.AD_Table_ID = 392 /*C_BankStatement*/ 
 THEN (SELECT 'Auto C_Payment:' || bsl.C_Payment_ID FROM C_BankStatementLine bsl 
 WHERE bsl.C_BankStatement_ID = fa.Record_ID 
 AND bsl.C_BankStatementLine_ID = fa.Line_ID ) END)
FROM Fact_Acct fa WHERE fa.Fact_Acct_id=Fact_Reconciliation.Fact_Acct_ID</entry><entry>GL_Rec_Bank</entry></row>
<row><entry> </entry><entry>50004</entry><entry> </entry><entry>D</entry><entry>R</entry><entry> </entry><entry>Not Invoiced Receipts</entry><entry>Q</entry><entry>SELECT (CASE WHEN fa.AD_Table_ID =  319 /* M_InOut */ 
THEN (SELECT (CASE WHEN io.DocStatus IN ('VO','RE') AND io.Reversal_ID &gt;
 0 
                            THEN 'Auto M_InOut Reversed:' || least(io.M_InOut_ID, io.Reversal_ID)
                            WHEN io.DocStatus = 'VO'
                            THEN 'Auto M_InOut Voided:' || io.M_InOut_ID
                            ELSE 'Auto M_InOut:' || fa.Record_ID || ' Line:' || fa.Line_ID END)
            FROM M_InOut io
            WHERE io.M_InOut_ID = fa.Record_ID)
WHEN fa.AD_Table_ID = 318 /* C_Invoice */ 
THEN (SELECT MAX(CASE WHEN i.DocStatus IN ('VO', 'RE') AND i.Reversal_ID &gt;
 0 
                           THEN 'Auto C_Invoice Reversed:' || least(i.C_Invoice_ID, i.Reversal_ID)
                           WHEN i.DocStatus = 'VO'
                           THEN 'Auto C_Invoice Voided:' || i.C_Invoice_ID
                            ELSE 'Auto M_InOut:' || iol.M_InOut_ID || ' Line:' || m.M_InOutLine_ID END)
             FROM C_InvoiceLine il
             INNER JOIN C_Invoice i ON (i.C_Invoice_ID=il.C_Invoice_ID)
             LEFT OUTER JOIN M_MatchInv m ON (il.C_InvoiceLine_ID=m.C_InvoiceLine_ID)
             LEFT OUTER JOIN M_InOutLine iol ON (iol.M_InOutLine_ID=m.M_InOutLine_ID) 
             WHERE il.C_InvoiceLine_ID = fa.Line_ID )
 WHEN fa.AD_Table_ID = 472 /* M_MatchInv */ 
 THEN (SELECT 'Auto M_InOut:' || iol.M_InOut_ID || ' Line:' || m.M_InOutLine_ID
 FROM M_MatchInv m
 INNER JOIN M_InOutLine iol ON (iol.M_InOutLine_ID=m.M_InOutLine_ID) 
 WHERE m.M_MatchInv_ID = fa.Record_ID ) END) 
FROM Fact_Acct fa WHERE fa.Fact_Acct_id=Fact_Reconciliation.Fact_Acct_ID</entry><entry>GL_Rec_Receipts</entry></row></tbody>
</tgroup>
</table>